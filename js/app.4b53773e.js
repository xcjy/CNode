(function(t){function e(e){for(var a,i,c=e[0],r=e[1],l=e[2],p=0,m=[];p<c.length;p++)i=c[p],s[i]&&m.push(s[i][0]),s[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var r=n[c];0!==s[r]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/CNode/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},4220:function(t,e,n){},4804:function(t,e,n){"use strict";var a=n("6a81"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("66b9");var a=n("b650"),s=(n("da3c"),n("0b33")),o=(n("bda7"),n("5e46")),i=(n("5246"),n("6b41")),c=(n("c194"),n("7744")),r=(n("0653"),n("34e9")),l=(n("be7f"),n("565f")),u=(n("8a58"),n("e41f")),p=(n("3208"),n("c0b2")),m=(n("e7e5"),n("d399")),f=(n("ab71"),n("58e6")),d=(n("6a39"),n("f240")),h=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",[n("van-nav-bar",{attrs:{title:"CNode移动端社区","left-text":"返回","right-text":"更多","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),n("router-view")],1),n("van-actionsheet",{attrs:{actions:t.moreMenus},on:{select:t.onSelect},model:{value:t.showMoreMenus,callback:function(e){t.showMoreMenus=e},expression:"showMoreMenus"}})],1)},g=[],_=n("cebc"),b=n("2f62"),k={name:"app",data:function(){return{}},computed:Object(_["a"])({},Object(b["d"])(["loginMoreMenus","unLoginMoreMenus","isLogined"]),Object(b["b"])(["moreMenus"]),{isLogined:{get:function(){return this.$store.state.isLogined},set:function(t){this.$store.commit("mutationChangeLogin",t)}},showMoreMenus:{get:function(){return this.$store.state.showMoreMenus},set:function(t){this.$store.commit("mutationIsShowMoreMenus",t)}}}),created:function(){var t=window.localStorage.getItem("loginStatus");t&&(this.mutationLogin(),this.mutationLoginName(localStorage.getItem("loginName")),this.mutationAccessToken(localStorage.getItem("accessToken")))},methods:Object(_["a"])({},Object(b["c"])(["mutationLogin","mutationLoginName","mutationAccessToken"]),{onClickLeft:function(){this.$router.back(-1)},onClickRight:function(){this.showMoreMenus=!0},onSelect:function(t,e){this.showMoreMenus=!1,this.$router.push("/"+t.className)}})},C=k,M=n("2877"),$=Object(M["a"])(C,v,g,!1,null,null,null),L=$.exports,w=n("8c4f"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},y=[],N={name:"home",components:{},data:function(){return{}},methods:{}},O=N,x=Object(M["a"])(O,j,y,!1,null,null,null),I=(x.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-tabs",{on:{click:t.routeto},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.topics,function(t,e){return n("van-tab",{key:e,attrs:{title:t.desc}})}),1),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-cell-group",t._l(t.lists,function(e,a){return n("van-cell",{key:a,attrs:{title:e.title,"is-link":"",url:"/CNode/#/topic/"+e.id}},[n("span",{staticClass:"cell_title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"reply_count"},[t._v(t._s(e.reply_count))]),t._v(" \n            /\n            "),n("span",{staticClass:"visit_count"},[t._v(t._s(e.visit_count))]),e.top?n("span",{staticClass:"top"},[t._v("置顶")]):t._e(),"/topiclist/all"==t.$route.path?n("span",{staticClass:"tab"},[t._v(t._s(t.tabMap[e.tab]))]):t._e(),n("span",{staticClass:"title"},[t._v(t._s(e.title))])]),n("span",{staticClass:"cell_author_avatar",attrs:{slot:"icon"},slot:"icon"},[n("img",{attrs:{src:e.author.avatar_url}})])])}),1)],1),t.lists?n("van-pagination",{attrs:{"total-items":1500,"items-per-page":10},on:{change:t.handleChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),S=[],T=(n("7f7f"),{name:"topiclist",props:["name"],data:function(){return{lists:[],page:1,currentPage:1,limit:15,isLoading:!1,tabMap:{ask:"问答",share:"分享",job:"招聘",good:"精华"}}},computed:Object(_["a"])({},Object(b["d"])(["topics"]),{active:{get:function(){return this.$store.state.active},set:function(t){this.$store.commit("mutationChangeActive",t)}}}),beforeRouteEnter:function(t,e,n){n(function(e){e.$http.get("/topics",{params:{tab:t.params.name,page:e.page,limit:e.limit}}).then(function(t){t.data.success&&(e.lists=t.data.data)})})},beforeRouteUpdate:function(t,e,n){this.currentPage=1;var a=this;this.$http.get("/topics",{params:{tab:t.params.name,page:this.page,limit:this.limit}}).then(function(t){t.data.success&&(a.lists=t.data.data)}),n()},methods:{routeto:function(t,e){this.$router.push("/topiclist/"+this.topics[t].name)},onRefresh:function(){var t=this;setTimeout(function(){t.$toast("刷新成功"),t.isLoading=!1},500)},handleChange:function(){var t=this;this.$http.get("/topics",{params:{tab:this.name,page:this.currentPage,limit:this.limit}}).then(function(e){e.data.success&&(t.lists=e.data.data)})}},watch:{"$route.path":function(){if(this.$route.path!=="/topiclist/"+this.topics[this.active].name)switch(this.$route.path){case"/topiclist/all":this.active=0;break;case"/topiclist/good":this.active=1;break;case"/topiclist/share":this.active=2;break;case"/topiclist/ask":this.active=3;break;case"/topiclist/job":this.active=4;break;case"/topiclist/dev":this.active=5;break}}}}),E=T,P=(n("761a"),Object(M["a"])(E,I,S,!1,null,"b9d0e586",null)),R=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.topic?n("div",{attrs:{id:"content"}},[n("div",{staticClass:"panel"},[n("div",{staticClass:"topic_header"},[n("span",{staticClass:"topic_full_title"},[t._v(t._s(t.topic.title))]),n("div",{staticClass:"changes"},[n("span",[t._v(" 作者    "),n("a",{attrs:{href:"/CNode/#/user/"+t.topic.author.loginname}},[t._v(t._s(t.topic.author.loginname))])]),n("span",[t._v(" "+t._s(t.topic.visit_count)+"次浏览")]),n("span",[t._v(" 来自"+t._s(t.topic.tab))])])]),n("div",{staticClass:"inner_topic"},[n("div",{staticClass:"markdown-body topic_content",domProps:{innerHTML:t._s(t.topic.content)}})])]),n("div",{staticClass:"panel"},[n("van-cell-group",[n("div",{staticClass:"replies_header"},[t._v(t._s(t.topic.reply_count)+" 回复")]),t._l(t.topic.replies,function(e,a){return n("van-cell",{key:a},[n("div",{staticClass:"author_content"},[n("span",{staticClass:"cell_author_avatar",attrs:{slot:"icon"},slot:"icon"},[n("img",{attrs:{src:e.author.avatar_url}})]),n("span",[n("a",{attrs:{href:"/CNode/#/user/"+e.author.loginname}},[t._v(t._s(e.author.loginname)+" ")]),t._v("  ")]),n("span",[t._v(" "+t._s(a+1)+"楼")])]),n("div",{staticClass:"reply_content markdown-body",domProps:{innerHTML:t._s(e.content)}})])})],2)],1)]):t._e()},U=[],H={name:"topic",props:["id"],data:function(){return{topic:null}},beforeRouteEnter:function(t,e,n){n(function(e){e.$http.get("/topic/"+t.params.id).then(function(t){t.data.success&&(e.topic=t.data.data)})})},beforeRouteUpdate:function(t,e,n){this.$http.get("/topic/"+t.params.id).then(function(t){t.data.success})}},J=H,z=(n("89df"),Object(M["a"])(J,A,U,!1,null,"90913414",null)),q=z.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v(" 用户登录 ")]),n("van-cell-group",[n("van-field",{attrs:{center:"",clearable:"",label:"AccessToken：",placeholder:"请输入AccessToken"},model:{value:t.accesstoken,callback:function(e){t.accesstoken=e},expression:"accesstoken"}},[n("van-button",{attrs:{slot:"button",size:"small",type:"primary"},nativeOn:{click:function(e){return t.dologin(e)}},slot:"button"},[t._v("登陆")])],1)],1)],1)},D=[],F={name:"login",data:function(){return{accesstoken:null}},methods:Object(_["a"])({},Object(b["c"])(["mutationLogin","mutationLoginName","mutationAccessToken"]),{dologin:function(){var t=this;this.$http.post("./accesstoken",{accesstoken:this.accesstoken}).then(function(e){e.data.success?(t.mutationLogin(),t.mutationLoginName(e.data.loginname),t.mutationAccessToken(t.accesstoken),localStorage.setItem("loginStatus",!0),localStorage.setItem("loginName",e.data.loginname),localStorage.setItem("accessToken",t.accesstoken),t.$router.push("/user/"+e.data.loginname)):t.$toast("登陆失败 请检查AccessToken是否正确")})}})},G=F,K=(n("e00e"),Object(M["a"])(G,B,D,!1,null,"3d1c5ccf",null)),Q=K.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},W=[],X={name:"logout",created:function(){this.$store.commit("mutationLogout"),localStorage.clear(),this.$router.push("/topiclist/all")}},Y=X,Z=Object(M["a"])(Y,V,W,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("msg page")])},nt=[],at={name:"message"},st=at,ot=Object(M["a"])(st,et,nt,!1,null,null,null),it=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("center page")])},rt=[],lt=(n("a481"),{name:"center",computed:{loginName:function(){return this.$store.state.loginName}},created:function(){this.$router.replace("/user/"+this.loginName)}}),ut=lt,pt=Object(M["a"])(ut,ct,rt,!1,null,null,null),mt=pt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo?n("div",[n("div",{staticClass:"content"},[n("div",{staticClass:"pannel"},[t._m(0),n("div",{staticClass:"userInfo"},[n("img",{attrs:{src:t.userInfo.avatar_url}}),t._v(" \n          "+t._s(t.userInfo.loginname)+"\n          "),n("ul",[n("li",[t._v(" "+t._s(t.userInfo.score)+" 积分")]),n("li",[t._v(" 注册时间: "+t._s(t.userInfo.create_at))])])])]),n("div",{staticClass:"pannel"},[t._m(1),n("van-cell-group",t._l(t.userInfo.recent_topics,function(e,a){return n("van-cell",{key:a,attrs:{title:e.title,"is-link":"",url:"/CNode/#/topic/"+e.id}},[n("span",{staticClass:"cell_title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title"},[t._v(t._s(e.title))])]),n("span",{staticClass:"cell_author_avatar",attrs:{slot:"icon"},slot:"icon"},[n("img",{attrs:{src:e.author.avatar_url}})])])}),1)],1),n("div",{staticClass:"pannel"},[t._m(2),n("van-cell-group",t._l(t.userInfo.recent_replies,function(e,a){return n("van-cell",{key:a,attrs:{title:e.title,"is-link":"",url:"/CNode/#/topic/"+e.id}},[n("span",{staticClass:"cell_title",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title"},[t._v(t._s(e.title))])]),n("span",{staticClass:"cell_author_avatar",attrs:{slot:"icon"},slot:"icon"},[n("img",{attrs:{src:e.author.avatar_url}})])])}),1)],1)])]):t._e()},dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",{staticClass:"col_fade"},[t._v(" 主页")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",{staticClass:"col_fade"},[t._v(" 最近创建的话题")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("span",{staticClass:"col_fade"},[t._v(" 最近回复的话题")])])}],ht={name:"User",prpos:["loginName"],data:function(){return{userInfo:{}}},beforeRouteEnter:function(t,e,n){n(function(e){e.$http.get("/user/"+t.params.loginName).then(function(t){e.userInfo=t.data.data})})},beforeRouteUpdate:function(t,e,n){var a=this;this.$http.get("/user/"+t.params.loginName).then(function(t){a.userInfo=t.data.data}),n()}},vt=ht,gt=(n("4804"),Object(M["a"])(vt,ft,dt,!1,null,"0c488592",null)),_t=gt.exports;h["a"].use(w["a"]);var bt=new w["a"]({routes:[{path:"/",redirect:"/topiclist/all"},{path:"/topiclist/:name",name:"topiclist",component:R,props:!0},{path:"/topic/:id",name:"topic",component:q,props:!0},{path:"/login",name:"login",component:Q},{path:"/center",name:"center",component:mt},{path:"/user/:loginName",name:"user",component:_t,props:!0},{path:"/message",name:"message",component:it},{path:"/logout",name:"logout",component:tt}]}),kt={mutationChangeActive:function(t,e){t.active=e},mutationIsShowMoreMenus:function(t,e){t.showMoreMenus=e},mutationLogin:function(t){t.isLogined=!0},mutationLoginName:function(t,e){t.loginName=e},mutationAccessToken:function(t,e){t.accessToken=e},mutationLogout:function(t){t.isLogined=!1,t.loginName="",t.accessToken=""}},Ct=kt,Mt={},$t=Mt;h["a"].use(b["a"]);var Lt=new b["a"].Store({state:{active:0,isLogined:!1,loginName:"",showMoreMenus:!1,accessToken:"",unLoginMoreMenus:[{name:"登录",className:"login"}],loginMoreMenus:[{name:"个人中心",className:"center"},{name:"消息通知",className:"message"},{name:"退出登录",className:"logout"}],topics:[{name:"all",desc:"全部"},{name:"good",desc:"精华"},{name:"share",desc:"分享"},{name:"ask",desc:"问答"},{name:"job",desc:"招聘"},{name:"dev",desc:"测试"}]},getters:{moreMenus:function(t){return t.isLogined?t.loginMoreMenus:t.unLoginMoreMenus}},mutations:Ct,actions:$t}),wt=n("bc3a"),jt=n.n(wt),yt=jt.a.create({baseURL:"https://cnodejs.org/api/v1"}),Nt=yt,Ot=n("fe3c"),xt=n.n(Ot);n("e4cb"),n("7371");h["a"].prototype.$http=Nt,h["a"].config.productionTip=!1,xt.a.attach(document.body),h["a"].use(a["a"]).use(s["a"]).use(o["a"]).use(i["a"]).use(c["a"]).use(r["a"]).use(l["a"]).use(u["a"]).use(p["a"]).use(m["a"]).use(f["a"]).use(d["a"]),new h["a"]({router:bt,store:Lt,render:function(t){return t(L)}}).$mount("#app")},"618e":function(t,e,n){},"6a81":function(t,e,n){},7371:function(t,e,n){},"761a":function(t,e,n){"use strict";var a=n("618e"),s=n.n(a);s.a},"89df":function(t,e,n){"use strict";var a=n("4220"),s=n.n(a);s.a},b806:function(t,e,n){},e00e:function(t,e,n){"use strict";var a=n("b806"),s=n.n(a);s.a}});
//# sourceMappingURL=app.4b53773e.js.map